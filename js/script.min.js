let heroSlider=new Swiper("#hero__slider",{speed:300,slidesPerView:1,loop:!0,wrapperClass:"hero__swiper-wrapper",slideClass:"hero__swiper-slide",effect:"fade",allowTouchMove:!1,autoplay:{delay:2500},preloadImages:!1,a11y:{enable:!1}}),gallerySlider=new Swiper("#gallery__slider",{speed:300,wrapperClass:"gallery__list",slideClass:"gallery__item",navigation:{nextEl:".gallery__btn.next",prevEl:".gallery__btn.prev"},pagination:{el:".pagination",type:"fraction"},preloadImages:!1,lazy:{loadOnTransitionStart:!1,loadPrevNext:!1},watchSlidesProgress:!0,watchSlidesVisibility:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,grabCursor:!0,breakpoints:{1600:{slidesPerColumnFill:"row",slidesPerView:3,slidesPerColumn:2,spaceBetween:50,slidesPerGroup:3},768:{slidesPerColumnFill:"row",slidesPerView:2,slidesPerColumn:2,spaceBetween:34,slidesPerGroup:2},320:{slidesPerColumnFill:"column",slidesPerView:1,loop:!0}},a11y:{enable:!0,containerMessage:"Слайдер Галереи",prevSlideMessage:"Предыдущий слайд",nextSlideMessage:"Следующий слайд",firstSlideMessage:"Это первый слайд",lastSlideMessage:"Это последний слайд"}}),eventSwiper=new Swiper("#event__slider",{speed:300,slidesPerView:1,loop:!0,grabCursor:!0,wrapperClass:"events__list",slideClass:"events__item",pagination:{el:".events__pagination",type:"bullets",clickable:!0},a11y:{enable:!0,containerMessage:"Слайдер Событий",prevSlideMessage:"Предыдущий слайд",nextSlideMessage:"Следующий слайд",firstSlideMessage:"Это первый слайд",lastSlideMessage:"Это последний слайд",paginationBulletMessage:"Переход к слайду {{index}}"}}),editionSlider=new Swiper("#editions__slider",{speed:300,loop:!0,wrapperClass:"editions__product-list",slideClass:"editions__product-item",navigation:{nextEl:".editions__product-btn.next",prevEl:".editions__product-btn.prev"},pagination:{el:".pagination",type:"fraction"},preloadImages:!1,lazy:{loadOnTransitionStart:!1,loadPrevNext:!1},watchSlidesProgress:!0,watchSlidesVisibility:!0,grabCursor:!0,breakpoints:{1600:{slidesPerView:3,spaceBetween:50,slidesPerGroup:3},768:{slidesPerView:2,spaceBetween:40,slidesPerGroup:2}},a11y:{enable:!0,containerMessage:"Слайдер Издания",prevSlideMessage:"Предыдущий слайд",nextSlideMessage:"Следующий слайд",firstSlideMessage:"Это первый слайд",lastSlideMessage:"Это последний слайд"}}),partnersSlider=new Swiper("#partners__slider",{wrapperClass:"partners__list",slideClass:"partners__item",grabCursor:!0,loop:!0,navigation:{nextEl:".partners__btn.next",prevEl:".partners__btn.prev"},autoplay:{delay:3500},breakpoints:{1600:{slidesPerView:3,spaceBetween:50,slidesPerGroup:3},1024:{slidesPerView:2,spaceBetween:45,slidesPerGroup:2},768:{slidesPerView:2,spaceBetween:34,slidesPerGroup:2},320:{slidesPerView:1}},a11y:{enable:!0,containerMessage:"Слайдер Партнеров",prevSlideMessage:"Предыдущий слайд",nextSlideMessage:"Следующий слайд",firstSlideMessage:"Это первый слайд",lastSlideMessage:"Это последний слайд"}}),projectLartnersList=document.querySelector(".partners__list");projectLartnersList.addEventListener("mouseenter",function(){partnersSlider.autoplay.stop()}),projectLartnersList.addEventListener("mouseleave",function(){partnersSlider.autoplay.start()});let menuLinkItem=document.querySelectorAll(".header__item-link, .hero__subscribe-btn");menuLinkItem.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(this.hash).scrollIntoView()})});let selectHeader=function(){let e=document.querySelectorAll(".select__header"),t=document.querySelectorAll(".select__item");function n(){this.parentElement.classList.toggle("is-active")}function l(){this.closest(".select").classList.remove("is-active")}e.forEach(e=>{e.addEventListener("click",n)}),t.forEach(e=>{e.addEventListener("click",l)}),document.addEventListener("click",e=>{let t=e.target;document.querySelectorAll(".select").forEach(e=>{let n=t==e||e.contains(t),l=e.classList.contains("is-active");!n&&l&&e.classList.remove("is-active")})})};selectHeader();let selectGallery=function(){let e=document.querySelector(".gallery-select"),t=document.querySelector(".gallery-select__header"),n=document.querySelectorAll(".gallery-select__item"),l=e.querySelector(".gallery-select__current").innerText;function s(){let t=this.innerText;e.querySelector(".gallery-select__current").innerText=t,this.querySelector(".gallery-select__item-link").innerText=l,l=t,e.classList.remove("is-active")}t.addEventListener("click",function(){this.parentElement.classList.toggle("is-active")}),n.forEach(e=>{e.addEventListener("click",s)}),document.addEventListener("click",t=>{let n=t.target,l=n==e||e.contains(n),s=e.classList.contains("is-active");!l&&s&&e.classList.remove("is-active")})};selectGallery();const multiArtstyleSelectBar=()=>{document.querySelectorAll(".select__scroll-block").forEach(e=>{new SimpleBar(e,{scrollbarMaxSize:28})})};document.querySelectorAll(".select__scroll-block").forEach(e=>{new SimpleBar(e,{scrollbarMaxSize:28})});let tabsBtn=document.querySelectorAll(".catalog__lang-btn"),contentBlocks=document.querySelectorAll(".catalog__lang-block");tabsBtn.forEach(e=>{e.addEventListener("click",function(e){let t=e.target,n=e.target.dataset.path;t.classList.add("is-active");for(let e of tabsBtn)e.classList.contains("is-active")&&t!==e&&e.classList.remove("is-active");contentBlocks.forEach(e=>{e.classList.remove("is-active")}),document.querySelector(`[data-target="${n}"]`).classList.add("is-active")})}),$(document).ready(function(e){e(".catalog__ages-list").accordion({active:0,collapsible:!0,heightStyle:"content"})});let catalogPainterBtn=document.querySelectorAll(".catalog__painters-btn");catalogPainterBtn.forEach(e=>{e.addEventListener("click",function(e){let t=e.target,n=e.target.dataset.path,l=document.documentElement.clientWidth,s=t.closest(".catalog__painters-list").children,a=document.querySelector(".catalog__lang-block.is-active").querySelectorAll(".catalog__biography-item");for(let e of s){let t=e.querySelector(".catalog__painters-btn");t.classList.contains("is-active")&&t.classList.remove("is-active")}a.forEach(e=>{e.classList.remove("is-active")}),t.classList.add("is-active"),document.querySelector(`[data-target="${n}"]`).classList.add("is-active"),l<=767&&document.querySelector(`[data-target="${n}"]`).scrollIntoView({behavior:"smooth"})})});let eventBtn=document.querySelector(".events__allevents-btn"),eventItem=document.querySelectorAll(".events__item");!function(){let e=[window.innerWidth];e>=768&&e<=1023&&eventItem[2].classList.remove("is-active")}(),eventBtn.addEventListener("click",function(){eventBtn.style.display="none";for(let e of eventItem)e.classList.contains("is-active")||e.classList.add("is-active")}),window.addEventListener("resize",function(){let e=[window.innerWidth];if(e>767){if(e>=1024&&!eventItem[2].classList.contains("is-active")&&(eventBtn.style.display="block")&&eventItem[2].classList.add("is-active"),!(e<768)&&e>=768&&eventItem[3].classList.contains("is-active")&&(eventBtn.style.display="none"))for(let e in eventItem)e>2&&(eventItem[e].classList.remove("is-active"),eventBtn.style.display="block");if(e>=768&&e<1024&&eventItem[2].classList.contains("is-active")&&(eventBtn.style.display="none"))for(let e in eventItem)e>1&&(eventItem[e].classList.remove("is-active"),eventBtn.style.display="block")}});let editionsAccordion=document.querySelector(".editions__accordion"),accordionCategoryInput=editionsAccordion.querySelectorAll(".checkbox__input"),categoryListDesktop=document.querySelector(".editions__category-list.desktop"),categoryInputDesktop=categoryListDesktop.querySelectorAll(".checkbox__input"),priceFilterInput=document.querySelectorAll(".price-filter__input"),productPrice=document.querySelectorAll(".product__price");function changeClassCategoryItem(e,t){for(let n of categoryInputDesktop){let l=n.parentNode.parentNode;n.name===t&&(n.checked=e.checked,n.parentElement.classList.toggle("checked"),e.parentNode.classList.toggle("checked"),l.classList.toggle("checked"))}}function changeCheckedInputAccordion(e,t){for(let n of accordionCategoryInput){let l=e.parentNode.parentNode;n.name===t&&(n.checked=e.checked,n.parentElement.classList.toggle("checked"),e.parentNode.classList.toggle("checked"),l.classList.toggle("checked"))}}function eventPriceInput(e){const t=+document.getElementById("from").getAttribute("placeholder").replace(/\s+/g,""),n=+document.getElementById("to").getAttribute("placeholder").replace(/\s+/g,"");let l=document.getElementById("from").value,s=document.getElementById("to").value,a=/[0-9]|\./;l===e&&a.test(e)&&(e=e.replace(/[^\0-9]/g,""),document.getElementById("from").value=e,e<t&&(document.getElementById("from").value=t),e>n&&(document.getElementById("from").value=n,document.getElementById("to").value=n),+l>+s&&""!==s&&e<=n&&(document.getElementById("to").value=+l),""===l&&(document.getElementById("from").value="")),l!==e||a.test(e)||(document.getElementById("from").value=""),s===e&&a.test(e)&&(e=e.replace(/[^\0-9]/g,""),document.getElementById("to").value=e,e>n&&(document.getElementById("to").value=n),e<t&&(document.getElementById("from").value=t,document.getElementById("to").value=t),+l>+s&&""!==l&&e>=t&&(document.getElementById("from").value=s),""===s&&(document.getElementById("to").value="")),s!==e||a.test(e)||(document.getElementById("to").value="")}$(document).ready(function(e){e(".editions__accordion").accordion({active:!1,collapsible:!0,heightStyle:"content"})}),accordionCategoryInput.forEach(e=>{e.addEventListener("click",e=>{let t=e.target;changeClassCategoryItem(t,t.name)})}),categoryInputDesktop.forEach(e=>{e.addEventListener("click",e=>{let t=e.target;changeCheckedInputAccordion(t,t.name)})}),priceFilterInput.forEach(e=>{e.addEventListener("change",e=>{eventPriceInput(e.target.value)})});let tooltip=document.querySelectorAll(".tooltip");function init(){let e=new ymaps.Map("map",{center:[55.758463,37.601079],zoom:14,controls:["zoomControl","geolocationControl"]}),t=(new ymaps.GeoObject({geometry:{type:"Point",coordinates:[55.758463,37.601079]}}),new ymaps.Placemark([55.758463,37.601079],{hintContent:['<div class="feedback__map-hint">Леонтьевский переулок, дом 5, строение 1</div>'],balloonContent:['<div class="feedback__map-baloon">','<img class="logo-img" src="image/logo/logo.svg">',"<div>Шоурум №4</div>","<span>Адрес: Леонтьевский переулок, дом 5, строение 1</span>","</div>"].join("")},{iconLayout:"default#image",iconImageHref:"image/mapmark/placemark.svg",iconImageSize:[20,20],iconImageOffset:[-10,-20],preset:"islands#redDotIcon"}));e.geoObjects.add(t)}tooltip.forEach(e=>{let t=e.querySelector(".tooltip__marker"),n=e.querySelector(".tooltip__popup"),l=Popper.createPopper(t,n,{placement:"top",modifiers:[{name:"flip",options:{fallbackPlacements:["left","right","bottom"]}}]});function s(){n.setAttribute("data-show",""),l.update()}function a(){n.removeAttribute("data-show")}["mouseenter","focus"].forEach(e=>{t.addEventListener(e,s)}),["mouseleave","blur"].forEach(e=>{t.addEventListener(e,a)})}),YaMapsShown=!1,$(document).ready(function(){$(window).scroll(function(){YaMapsShown||$(window).scrollTop()+$(window).height()>$(document).height()-700&&(ymaps.ready(init),YaMapsShown=!0)})});let phoneInput=document.querySelector("input[type='tel']"),im=new Inputmask("+7 (999) 999-99-99");function successefulSendForm(){document.getElementById("successful-modal").classList.add("is-active"),disableScroll()}im.mask(phoneInput),new JustValidate(".feedback__form",{rules:{name:{required:!0,minLength:2,maxLength:25},tel:{required:!0,function:(e,t)=>{const n=phoneInput.inputmask.unmaskedvalue();return Number(n)&&10===n.length}}},colorWrong:"red",messages:{name:{required:"Как вас зовут?",minLength:"Необходимо ввести больше двух символов"},tel:{required:"Укажите ваш телефон",function:"Введен некорректный телефон"}},submitHandler:function(e){let t=new FormData(e),n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&successefulSendForm()},n.open("POST","mail.php",!0),n.send(t),e.reset()}});let okBtn=document.querySelectorAll(".modal__ok-btn");function errorModal(){document.getElementById("error-modal").classList.add("is-active"),disableScroll()}okBtn.forEach(e=>{e.addEventListener("click",function(e){e.target.closest(".modal").classList.remove("is-active"),enableScroll()})});let zoomModal=document.getElementById("zoom-popup"),closeBtnModal=document.getElementById("popup__close"),imgModal=document.getElementById("popup__img"),authorModal=document.getElementById("popup__author"),namePictureModal=document.getElementById("popup__name-picture"),yearsModal=document.getElementById("popup__years"),descModal=document.getElementById("popup__desc"),galleryImg=document.querySelectorAll(".gallery__link-img");galleryImg.forEach(e=>{e.addEventListener("click",function(e){let t=e.target,n=t.querySelector(".hidden"),l=t.querySelector(".gallery__img");document.body.style.overflow="hidden",zoomModal.style.display="flex",imgModal.src=l.src,authorModal.innerHTML=n.getAttribute("data-author"),namePictureModal.innerHTML=`"${n.getAttribute("data-name-picture")}"`,yearsModal.innerHTML=n.getAttribute("data-years"),descModal.innerHTML=n.textContent})}),document.addEventListener("click",function(e){let t=e.target;t!==zoomModal&&t!==closeBtnModal||(document.getElementById("zoom-popup").style.display="none",document.body.style.overflowY="auto")});let menuBtn=document.getElementById("header__menu-btn"),headerMenu=document.getElementById("header__menu"),menuItem=document.querySelectorAll(".header__item-link"),accountLink=document.querySelector(".header__account-link");menuBtn.addEventListener("click",function(){menuBtn.classList.toggle("is-active"),menuBtn.classList.contains("is-active")?headerMenu.classList.add("is-active"):headerMenu.classList.remove("is-active"),window.addEventListener("scroll",function(){2*(headerMenu.offsetHeight-document.documentElement.clientHeight)<window.scrollY&&(headerMenu.classList.remove("is-active"),menuBtn.classList.remove("is-active"))}),document.addEventListener("click",function(e){let t=e.target;const n=t==headerMenu||headerMenu.contains(t),l=t==menuBtn,s=headerMenu.classList.contains("is-active");n||l||!s||(headerMenu.classList.remove("is-active"),menuBtn.classList.remove("is-active"))})}),menuItem.forEach(e=>{e.addEventListener("click",function(){headerMenu.classList.contains("is-active")&&headerMenu.classList.remove("is-active")})}),accountLink.addEventListener("click",function(){headerMenu.classList.contains("is-active")&&(menuBtn.classList.remove("is-active"),headerMenu.classList.remove("is-active"))});
